{% extends "base.html" %}

{% block title %}κ³µμ  λ§ν¬ μƒμ„± μ™„λ£ - MBTI & Arcade Web Service{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <div class="text-center mb-8">
        <div class="text-6xl mb-4">π‰</div>
        <h1 class="text-3xl font-bold text-gray-800 mb-4">
            κ³µμ  λ§ν¬κ°€ μƒμ„±λμ—μµλ‹λ‹¤!
        </h1>
        <p class="text-xl text-gray-600">
            μΉκµ¬μ—κ² λ§ν¬λ¥Ό κ³µμ ν•μ—¬ MBTI ν…μ¤νΈλ¥Ό λ°›μ•„λ³΄μ„Έμ”.
        </p>
    </div>

    <!-- κ³µμ  λ§ν¬ μΉ΄λ“ -->
    <div class="bg-white rounded-lg shadow-lg p-8 mb-8">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">π“¤ κ³µμ  λ§ν¬</h2>
        
        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6">
            <div class="flex items-center justify-between">
                <input type="text" id="shareUrl" value="{{ share_url }}" readonly 
                       class="flex-1 bg-transparent border-none outline-none text-lg font-mono text-gray-700">
                <button onclick="copyToClipboard()" 
                        class="ml-4 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                    λ³µμ‚¬
                </button>
            </div>
        </div>

        <div class="text-center">
            <p class="text-gray-600 mb-4">
                μ΄ λ§ν¬λ” <strong>60λ¶„</strong> ν›„μ— λ§λ£λ©λ‹λ‹¤.
            </p>
            <div class="flex justify-center space-x-4">
                <a href="{{ share_url }}" target="_blank" 
                   class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors">
                    π”— λ§ν¬ ν…μ¤νΈν•κΈ°
                </a>
                <button onclick="shareToKakao()" 
                        class="bg-yellow-400 text-black px-6 py-3 rounded-lg hover:bg-yellow-500 transition-colors">
                    π’¬ μΉ΄μΉ΄μ¤ν†΅ κ³µμ 
                </button>
            </div>
        </div>
    </div>

    <!-- κ³µμ  λ°©λ²• μ•λ‚΄ -->
    <div class="grid md:grid-cols-2 gap-6 mb-8">
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-blue-800 mb-3">π“± λ¨λ°”μΌ κ³µμ </h3>
            <ul class="space-y-2 text-blue-700">
                <li>β€Ά μΉ΄μΉ΄μ¤ν†΅, ν…”λ κ·Έλ¨ λ“± λ©”μ‹ μ €λ΅ λ§ν¬ μ „μ†΅</li>
                <li>β€Ά λ¬Έμλ©”μ‹μ§€λ΅ λ§ν¬ κ³µμ </li>
                <li>β€Ά QRμ½”λ“ μƒμ„±ν•μ—¬ κ³µμ </li>
            </ul>
        </div>
        
        <div class="bg-green-50 border border-green-200 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-green-800 mb-3">π’» λ°μ¤ν¬ν†± κ³µμ </h3>
            <ul class="space-y-2 text-green-700">
                <li>β€Ά μ΄λ©”μΌλ΅ λ§ν¬ μ „μ†΅</li>
                <li>β€Ά μ¬λ™, λ””μ¤μ½”λ“ λ“± ν€ ν‘μ—… λ„κµ¬</li>
                <li>β€Ά μ†μ…λ―Έλ””μ–΄μ— λ§ν¬ κ²μ‹</li>
            </ul>
        </div>
    </div>

    <!-- κ²°κ³Ό ν™•μΈ μ•λ‚΄ -->
    <div class="bg-purple-50 border border-purple-200 rounded-lg p-6 mb-8">
        <h3 class="text-lg font-semibold text-purple-800 mb-3">π“ κ²°κ³Ό ν™•μΈ</h3>
        <div class="text-purple-700">
            <p class="mb-2">μΉκµ¬κ°€ ν…μ¤νΈλ¥Ό μ™„λ£ν•λ©΄:</p>
            <ul class="space-y-1">
                <li>β€Ά μΉκµ¬μ MBTI κ²°κ³Όλ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤</li>
                <li>β€Ά λ‹Ήμ‹ μ μκ°€ ν‰κ°€μ™€ λΉ„κµ λ¶„μ„μ„ λ³Ό μ μμµλ‹λ‹¤</li>
                <li>β€Ά μ°¨μ΄μ κ³Ό κ³µν†µμ μ„ ν†µν•΄ μ„λ΅λ¥Ό λ” κΉμ΄ μ΄ν•΄ν•  μ μμµλ‹λ‹¤</li>
            </ul>
        </div>
    </div>

    <!-- μ•΅μ… λ²„νΌλ“¤ -->
    <div class="text-center space-x-4">
        <a href="/mbti" 
           class="inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors">
            π§  λ‚΄ MBTI ν…μ¤νΈν•κΈ°
        </a>
        <a href="/mbti/friend" 
           class="inline-block bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors">
            π‘¥ λ‹¤λ¥Έ μΉκµ¬ ν…μ¤νΈν•κΈ°
        </a>
        <a href="/" 
           class="inline-block bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition-colors">
            π  ν™μΌλ΅ λμ•„κ°€κΈ°
        </a>
    </div>
</div>

<script>
function copyToClipboard() {
    const urlInput = document.getElementById('shareUrl');
    urlInput.select();
    urlInput.setSelectionRange(0, 99999); // For mobile devices
    
    try {
        // Modern clipboard API
        if (navigator.clipboard && window.isSecureContext) {
            navigator.clipboard.writeText(urlInput.value).then(() => {
                showCopySuccess();
            });
        } else {
            // Fallback for older browsers
            document.execCommand('copy');
            showCopySuccess();
        }
    } catch (err) {
        console.error('Failed to copy: ', err);
        alert('λ§ν¬ λ³µμ‚¬μ— μ‹¤ν¨ν–μµλ‹λ‹¤. μλ™μΌλ΅ λ³µμ‚¬ν•΄μ£Όμ„Έμ”.');
    }
}

function showCopySuccess() {
    const button = event.target;
    const originalText = button.textContent;
    button.textContent = 'λ³µμ‚¬λ¨!';
    button.classList.add('bg-green-600');
    button.classList.remove('bg-blue-600');
    
    setTimeout(() => {
        button.textContent = originalText;
        button.classList.remove('bg-green-600');
        button.classList.add('bg-blue-600');
    }, 2000);
}

function shareToKakao() {
    const url = document.getElementById('shareUrl').value;
    const text = 'MBTI ν…μ¤νΈλ¥Ό λ°›μ•„λ³΄μ„Έμ”! λ‹Ήμ‹ μ΄ μƒκ°ν•λ” λ‚μ MBTIλ” λ¬΄μ—‡μΌκΉμ”?';
    
    // μΉ΄μΉ΄μ¤ν†΅ κ³µμ  URL μƒμ„±
    const kakaoUrl = `https://story.kakao.com/share?url=${encodeURIComponent(url)}&text=${encodeURIComponent(text)}`;
    window.open(kakaoUrl, '_blank');
}

// QR μ½”λ“ μƒμ„± (μ„ νƒμ )
function generateQRCode() {
    const url = document.getElementById('shareUrl').value;
    // QR μ½”λ“ λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν•μ—¬ QR μ½”λ“ μƒμ„±
    // μ: qrcode.js λΌμ΄λΈλ¬λ¦¬ μ‚¬μ©
}
</script>
{% endblock %} 
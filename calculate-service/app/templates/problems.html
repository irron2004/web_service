{% extends "base.html" %}

{% block title %}{{ category }} ë¬¸ì œ - Calculate Service{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <!-- í—¤ë” -->
    <div class="text-center mb-8">
        <h1 class="text-4xl font-bold text-gray-800 mb-4">
            ğŸ§® {{ category }} ë¬¸ì œ
        </h1>
        <p class="text-xl text-gray-600">
            {{ category }} ì—°ì‚° ë¬¸ì œë¥¼ í’€ì–´ë³´ì„¸ìš”!
        </p>
    </div>

    <!-- ë¬¸ì œ ëª©ë¡ -->
    <div class="space-y-6">
        {% for problem in problems %}
        <div class="bg-white rounded-xl shadow-lg p-6">
            <div class="flex items-center justify-between">
                <div class="flex-1">
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">
                        ë¬¸ì œ {{ loop.index }}: {{ problem.question }}
                    </h3>
                    <div class="flex items-center space-x-4">
                        <input type="number" 
                               id="answer-{{ loop.index }}" 
                               class="border-2 border-gray-300 rounded-lg px-4 py-2 text-lg focus:border-blue-500 focus:outline-none"
                               placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš”">
                        <button onclick="checkAnswer({{ loop.index }}, {{ problem.answer }})"
                                class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                            í™•ì¸
                        </button>
                        <span id="result-{{ loop.index }}" class="text-lg font-bold"></span>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- ê²°ê³¼ ìš”ì•½ -->
    <div class="mt-8 bg-blue-50 rounded-xl p-6">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ“Š ê²°ê³¼ ìš”ì•½</h2>
        <div class="grid md:grid-cols-3 gap-4">
            <div class="text-center">
                <div class="text-3xl font-bold text-blue-600" id="total-problems">{{ problems|length }}</div>
                <div class="text-gray-600">ì´ ë¬¸ì œ</div>
            </div>
            <div class="text-center">
                <div class="text-3xl font-bold text-green-600" id="correct-answers">0</div>
                <div class="text-gray-600">ì •ë‹µ</div>
            </div>
            <div class="text-center">
                <div class="text-3xl font-bold text-purple-600" id="accuracy">0%</div>
                <div class="text-gray-600">ì •ë‹µë¥ </div>
            </div>
        </div>
    </div>

    <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
    <div class="mt-8 flex justify-center space-x-4">
        <a href="/" 
           class="bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition-colors">
            ğŸ  í™ˆìœ¼ë¡œ
        </a>
        <a href="/problems?category=ë§ì…ˆ" 
           class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors">
            â• ë§ì…ˆ
        </a>
        <a href="/problems?category=ëº„ì…ˆ" 
           class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors">
            â– ëº„ì…ˆ
        </a>
        <a href="/problems?category=ê³±ì…ˆ" 
           class="bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors">
            âœ–ï¸ ê³±ì…ˆ
        </a>
        <a href="/problems?category=ë‚˜ëˆ—ì…ˆ" 
           class="bg-orange-600 text-white px-6 py-3 rounded-lg hover:bg-orange-700 transition-colors">
            â— ë‚˜ëˆ—ì…ˆ
        </a>
    </div>
</div>

<script>
let correctCount = 0;
const totalProblems = {{ problems|length }};

function checkAnswer(problemIndex, correctAnswer) {
    const input = document.getElementById(`answer-${problemIndex}`);
    const result = document.getElementById(`result-${problemIndex}`);
    const userAnswer = parseInt(input.value);
    
    if (userAnswer === correctAnswer) {
        result.textContent = "âœ… ì •ë‹µ!";
        result.className = "text-lg font-bold text-green-600";
        correctCount++;
    } else {
        result.textContent = `âŒ ì˜¤ë‹µ! ì •ë‹µ: ${correctAnswer}`;
        result.className = "text-lg font-bold text-red-600";
    }
    
    updateSummary();
}

function updateSummary() {
    const accuracy = Math.round((correctCount / totalProblems) * 100);
    document.getElementById('correct-answers').textContent = correctCount;
    document.getElementById('accuracy').textContent = `${accuracy}%`;
}
</script>
{% endblock %} 